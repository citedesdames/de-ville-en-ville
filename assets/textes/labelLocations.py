#!/usr/sfw/bin/python
# -*- coding: utf-8 -*-

import csv, glob, os, re, sys

folder = os.path.abspath(os.path.dirname(sys.argv[0]))

#"""
# Locations for Grand tour de France
locations = [
['ville capitale de Paris','1'],
['Sainct Mor des foſſez','2'],
['ville neufue ſainct Georges','3'],
['Corbeil','4'],
['au Lys','5'],
['Fõtainebleau','6'],
['Moret','7'],
['Montereau fault Yonne','8'],
['pont ſur Yonne','9'],
['Sens','10'],
['Pont ſur Venne','11'],
['Ville-neufue l’arceueſque','12'],
['ſainct Liebault','13'],
['ſainct Lye','14'],
['Troyes','15'],
['ſainct ſepulcre','16'],
['Arſy ſus aulbe','17'],
['Poyure','18'],
['Dãmartin','19'],
['leſcuyrie ſur Coſne','20'],
['Challons en Champaigne','21'],
['au May','22'],
['Vitry le Frãçois','23'],
['Bignicourt','24'],
['Sermoiſe','25'],
['Fain','26'],
['Barlduc','27'],
['Ligny en barroys','28'],
['Treueray','29'],
['Gondricourt','30'],
['lezinuille','31'],
['Rinugel','32'],
['mont de Clerre','33'],
['Dermã','34'],
['Chaumont en baſſigny','35'],
['Releupont','36'],
['Lẽgres','37'],
['Lõgeau','38'],
['Lõgſogeon','39'],
['Trichaſteau','40'],
['Ieumeau','41'],
['Meſnil','42'],
['Chartreux','43'],
['Diion','44'],
['Lõgecourt ','45'],
['Paingny','46'],
['Seure','47'],
['Sommier','48'],
['Aſſy','49'],
['Sainct Mareau','50'],
['Challons ſur la Sone','51'],
['Maſcon','52'],
['pont de Velle','53'],
['Maſcon','54'],
['Iſle','55'],
['Lyon','56'],
['Beauregart','57'],
['Lyon','58'],
['Mirebel','59'],
['Lyon','60'],
['Peron','61'],
['Lyon','62'],
['pont de Cherry','63'],
['Cremieux','64'],
['Erieux','65'],
['Septome','66'],
['Coſte Daray','67'],
['Roſſillon','68'],
['Anlou','69'],
['Iarſieux','70'],
['Chaſteau neuf','71'],
['Romans','72'],
['Valence','73'],
['l’Eſtoille','74'],
['Loriou','75'],
['derbieres','76'],
['Mõtlimar','77'],
['Douſelle','78'],
['la Garde','79'],
['ſainct Paul','80'],
['Seuſe','81'],
['Bollaines','82'],
['Montdragon','83'],
['Mornas','84'],
['Quaderouſſe','85'],
['põt deſorgnes','86'],
['Auignon','87'],
['Chaſteau regnard','88'],
['ſainct Remy','89'],
['Touret','90'],
['Salon de Craux en Prouence','91'],
['Laubés','92'],
['ſainct Iehan de la ſalle','93'],
['Aix en Prouence','94'],
['Pourieres','95'],
['ſainct Maximy','96'],
['ſaincte Baulme','97'],
['Bringnolles','98'],
['Gareau','99'],
['Cueurs','100'],
['ſouliers','101'],
['Yerres','102'],
['Briganſon','103'],
['Yerres','104'],
['Toullon','105'],
['Riolle','106'],
['la Cadiere','107'],
['Aubenes','108'],
['Gauſet','109'],
['Marſeille','110'],
['Baſtille de la Bedoulle','111'],
['Marignan','112'],
['Martegues','113'],
['ſainct Chamant','114'],
['ſainct Martin','115'],
['Arles','116'],
['Tarraſcon','117'],
['Beauquaire','118'],
['Sarignac','119'],
['Pont du Gap','120'],
['ſainct Priuat','121'],
['Nymes','122'],
['Vauvert','123'],
['Aigueſmortes','124'],
['Marſeillagues','125'],
['ſainct Brez ','126'],
['Montpellier','127'],
['villeneufue','128'],
['Montpellier','129'],
['Fabriques','130'],
['Pouſent','131'],
['Florenſac','132'],
['Agde','133'],
['Villeneufue','134'],
['Beziers','135'],
['Nyſens','136'],
['Narbonne','137'],
['Sylan','138'],
['Locquatre','139'],
['Sylan','140'],
['Narbonne','141'],
['Canet','142'],
['Mont','143'],
['Barbairen','144'],
['Carcaſſonne','145'],
['Arzãt','146'],
['Mõtreal','147'],
['Proille','148'],
['Villaſpic','149'],
['Ferratz','150'],
['Caſtelnauderry','151'],
['Vingnonet','152'],
['Ville franche','153'],
['Ville-nouuelle','154'],
['Bazieges','155'],
['Mongiſcart','156'],
['Thoulouſe','157'],
['ſainct Michel','158'],
['Toulouſe','159'],
['ſainct Iorry','160'],
['Fronton','161'],
['Clau','162'],
['Montauban','163'],
['Baſtide del Tempe','164'],
['Moiſac','165'],
['Pontuy','166'],
['Ballence','167'],
['Mageſterre','168'],
['la Foſſe','169'],
['Agen','170'],
['port ſaincte Marie','171'],
['Eguillon','172'],
['Marmande','173'],
['la Reolle','174'],
['Quadillac','175'],
['Bordeaux','176'],
['Toars','177'],
['à l’Eueſché','178'],
['Caſtres','179'],
['Lengon','180'],
['Bazas','181'],
['Boullas','182'],
['Captieux','183'],
['la Trauerſe','184'],
['Roquehort','185'],
['Mont de Marſen','186'],
['Millac','187'],
['Tartas','188'],
['Pouton','189'],
['Dax','190'],
['Saubuſe','191'],
['Bayonne','192'],
['la Houſſe','193'],
['Bayonne','194'],
['ſainct Iean de Luz','195'],
['Endaye','196'],
['ſainct Iean de Luz','197'],
['Bayonne','198'],
['ſainct Bernard','199'],
['Bayõne','200'],
['Iſle Daiſguemeau','201'],
['Bayonne','202'],
['Sainct Iehan de Luz','203'],
['au meſme lieu qu’ilz l’auoient receuë','204'],
['Sainct Iehan de Luz','205'],
['Bierry','206'],
['Bayonne','207'],
['Hurt','208'],
['Bidach','209'],
['Perrehorrade','210'],
['Dax','211'],
['Tartas','212'],
['mont de Marſan','213'],
['Cazaire','214'],
['Noguero','215'],
['Yauze','216'],
['Mõt Real','217'],
['Condon','218'],
['Nerac','219'],
['Buſet','220'],
['Thonintz','221'],
['Verteuil','222'],
['Loſun','223'],
['Bergerac','224'],
['Laugat','225'],
['Menſiden','226'],
['Ribera','227'],
['Rochebeaucourt','228'],
['la Tour Garnier','229'],
['Angouleſme','230'],
['la Thouure','231'],
['Angouleſme','232'],
['Chaſteauneuf','233'],
['Iarnac','234'],
['Coignac','235'],
['Lonza','236'],
['Coignac','237'],
['Port Chauueau','238'],
['Xainctes','239'],
['Cormoreau','240'],
['le Meſnil','241'],
['ſainct Iuſt','242'],
['Marennes','243'],
['le Broage','244'],
['Marennes','245'],
['Cormoran','246'],
['Xainctes','247'],
['Briſembourg','248'],
['ſainct Iehan D’angely','249'],
['Parenſes','250'],
['Surgeres','251'],
['la Iarrie','252'],
['la Rochelle','253'],
['Benon','254'],
['Mozé','255'],
['Fontenay le Battu','256'],
['Nyort','257'],
['Echeroé','258'],
['Chantdenier','259'],
['Baubare','260'],
['la Rochefaton','261'],
['Heruaut','262'],
['Oueron','263'],
['Touarts','264'],
['Ouerõ','265'],
['Loudun','266'],
['Seaulx','267'],
['Champigny','268'],
['Marſé','269'],
['Chauigny','270'],
['Fronteuaux','271'],
['Brezé','272'],
['Doué','273'],
['Martigny Bryant','274'],
['Alẽſon','275'],
['Briſſac','276'],
['Gonnor','277'],
['Chemilly','278'],
['Iallays','279'],
['Beaupreau','280'],
['Regrepiere','281'],
['Loron Bottreau','282'],
['Chebiette','283'],
['Thoret','284'],
['Nantes','285'],
['la Gallochette','286'],
['Ioué','287'],
['Maidon','288'],
['Chaſteaubriand','289'],
['Bourg delbret','290'],
['la Motte','291'],
['Candé','292'],
['Lorou','293'],
['la Touche aux Aſnes','294'],
['Angers','295'],
['au Verger','296'],
['Lezigny','297'],
['Durtal','298'],
['Gerzé','299'],
['Baugé','300'],
['Mõtliherné','301'],
['Fouriers','302'],
['Bourgueil','303'],
['Ingrande','304'],
['Lẽgés','305'],
['Mailly','306'],
['Pleſſis léz Tours','307'],
['Tours','308'],
['Pleſſis','309'],
['la Bourdoiziere','310'],
['Chenonçeau','311'],
['Amboiſe','312'],
['Ecures','313'],
['Bloys','314'],
['Cheuerny','315'],
['Mur','316'],
['Remorentin','317'],
['Menetou','318'],
['Viarrõ','319'],
['Meun ſur Yeure','320'],
['Bourges','321'],
['ſainct Ieu','322'],
['Dun le Roy','323'],
['pont de Chargé','324'],
['Couleuures','325'],
['la Franchiſe','326'],
['ſainct Menou','327'],
['Sauigny','328'],
['Moulins','329'],
['Beſſé','330'],
['Varennes','331'],
['Sainct Germain de la Foſſe','332'],
['Vichy','333'],
['ſainct Priet de Bramefan','334'],
['Maringues','335'],
['pont du Chaſteau','336'],
['Duſſet','337'],
['Villeconte','338'],
['ſainct Amand','339'],
['ſainct Saturnin','340'],
['Clermont en Auuergne','341'],
['Mõtferrand','342'],
['Clermont','343'],
['Rion','344'],
['ſainct Bonnet','345'],
['Aigueperſe','346'],
['Ebruſle','347'],
['Chantelle','348'],
['la Coue','349'],
['Montmarault','350'],
['Brés','351'],
['Coſne en Bourbonnois','352'],
['Tenoille','353'],
['Torſy','354'],
['Grouſobre','355'],
['Guyarche','356'],
['Aubigny','357'],
['la Charité','358'],
['Nerſy','359'],
['Douzy le pré','360'],
['Entrain','361'],
['la Peſſeliere','362'],
['Auoynes','363'],
['Auxerre','364'],
['Regẽt','365'],
['Iuigny','366'],
['Remeau','367'],
['Ville-neufue le Roy','368'],
['Sens','369'],
['Sergines','370'],
['Brais','371'],
['Mont-montoys','372'],
['Nangy','373'],
['Toquin','374'],
['Monceaux','375'],
['Buſſy ſainct George','376'],
['Sainct Mor des foſſez','377'],
['Paris','378'],

]
#"""


"""
# Locations for Mémoires de catherine de La Guette
locations = [
['chez nous','1'],
['envoya quérir','2'],
['abbaye de Jarsy','3'],
['petit Bourbon','4'],
['logis de <abbr class="abbr" title="Monsieur">M.</abbr>&#160;Guiot','5'],
['chez elles','6'],
['à table','7'],
['chez moi à la campagne','8'],
['Gros-Bois','9'],
['en nos maisons','10'],
['Gros-Bois','11'],
['Sussy','12'],
['Gros-Bois','13'],
['Sussy','14'],
['à Paris','15'],
['Val-de-Grâce','16'],
['chez moi','17'],
['Orléans','18'],
['Poitiers','19'],
['Angoulême','20'],
['petite ville','21'],
['la Tour Blanche','22'],
['Bourdeille','23'],
['Périgueux','24'],
['Bergerac','25'],
['Libourne','26'],
['la Bastide','27'],
['Garonne','28'],
['porte du Chapeau-Rouge','29'],
['à l’archevêché','30'],
['Bacalan','31'],
['la Bastide','32'],
['Lamone','33'],
['Libourne','34'],
['Mucidan','35'],
['Riberac','36'],
['Angoulême','37'],
['Paris','38'],
['chez la reine','39'],
['chez nous','40'],
['chez <abbr class="abbr" title="Monsieur">M.</abbr>&#160;le Cardinal','41'],
['Montereau-Faut-Yonne','42'],
['du couvent','43'],
['Montereau','44'],
['au milieu de la rivière de Seine','45'],
['Melun','46'],
['Paris','47'],
['chez moi','48'],
]
"""

"""
# Locations for Voyage de Gascogne
locations = [
['Paris','1'],
['Ollainville','2'],
['Estampes','3'],
['Angerville','4'],
['Artenay','5'],
['faulxbourgs d’Orléans','6'],
['Cléry','7'],
['S. Dye','8'],
['Blois','9'],
['Chenonceaux','10'],
['Tours','11'],
['Azé-le-Rideau','12'],
['Chinon','13'],
['abbaye de Fontevrault','14'],
['Chinon','15'],
['Champigny','16'],
['Mont-sur-Guêne','17'],
['Mirebeau','18'],
['Pont-d’Oranse','19'],
['Poictiers','20'],
['Vyvonne','21'],
['Couay','22'],
['Civray','23'],
['Ruffec','24'],
['Verteuil','25'],
['Renay','26'],
['Nègre','27'],
['Anville','28'],
['Neufvy','29'],
['Cognac','30'],
['Pons','31'],
['Plassac','32'],
['Mirambeau','33'],
['Tollyer','34'],
['Blaye','35'],
['Bourg','36'],
['Lybourne','37'],
['Créon','38'],
['Bordeaux','39'],
['Cadillac','40'],
['Sainct-Macaire','41'],
['Casteras','42'],
['la Réole','43'],
['Saincte-Bazeille','44'],
['Marmande','49'],
['Thonnynx','50'],
['Esguillon','51'],
['Port-Saincte-Marie','52'],
['Agen','53'],
['La Fox','54'],
['Vallance','55'],
['Mouassac','57'],
['Chasteau-Sarrazin','58'],
['Montèche','59'],
['Sainct-Jorry','60'],
['Tholouze','61'],
['Pibrac','62'],
['l’Isle en Jourdain','63'],
['Gimont','64'],
['Aubyet','65'],
['Aulch','66'],
['à Condom','67'],
['arrivée à Nérac','68'],
]
"""

#"""
inputText = open("tourdefrance-old.html", "r", encoding="utf-8")
outputText = open("tourdefrance.html", "w", encoding="utf-8")
#"""

"""
inputText = open("memoires-guette-old.html", "r", encoding="utf-8")
outputText = open("memoires-guette.html", "w", encoding="utf-8")
"""

"""
inputText = open("voyagedegascogne-old.html", "r", encoding="utf-8")
outputText = open("voyagedegascogne.html", "w", encoding="utf-8")
"""


allText = ""
for line in inputText:
   allText += line

treatedText = ""
remainingText = allText
l = 0
while l < len(locations):
   location = locations[l][0]
   id = locations[l][1]
   print("Looking for location #" + str(l) + ": " + location)
   position = remainingText.find(location)
   if position > 0:
      treatedText += remainingText[0:position] + '<span class="etape-texte" id="s' + id + '" onclick="(document.querySelector(\'#mark' + id + '\')).click()">' + location + '</span>'
      remainingText = remainingText[position+len(location):len(remainingText)]
   else:
      l = len(locations)
   l = l+1
inputText.close()
outputText.writelines(treatedText + remainingText)
outputText.close()