#!/usr/sfw/bin/python
# -*- coding: utf-8 -*-

import csv, glob, os, re, sys

folder = os.path.abspath(os.path.dirname(sys.argv[0]))

locations = [
['ville capitale de Paris','1'],
['Sainct Mor des foſſez','2'],
['ville neufue ſainct Georges','3'],
['Corbeil','4'],
['au Lys','5'],
['Fõtainebleau','6'],
['Moret','7'],
['Montereau fault Yonne','8'],
['pont ſur Yonne','9'],
['Sens','10'],
['Pont ſur Venne','11'],
['Ville-neufue l’arceueſque','12'],
['ſainct Liebault','13'],
['ſainct Lye','14'],
['Troyes','15'],
['ſainct ſepulcre','16'],
['Arſy ſus aulbe','17'],
['Poyure','18'],
['Dãmartin','19'],
['leſcuyrie ſur Coſne','20'],
['Challons en Champaigne','21'],
['au May','22'],
['Vitry le Frãçois','23'],
['Bignicourt','24'],
['Sermoiſe','25'],
['Fain','26'],
['Barlduc','27'],
['Ligny en barroys','28'],
['Treueray','29'],
['Gondricourt','30'],
['lezinuille','31'],
['Rinugel','32'],
['mont de Clerre','33'],
['Dermã','34'],
['Chaumont en baſſigny','35'],
['Releupont','35b'],
['Lẽgres','36'],
['Lõgeau','37'],
['Lõgſogeon','38'],
['Trichaſteau','39'],
['Ieumeau','40'],
['Meſnil','41'],
['Chartreux','42'],
['Diion','43'],
['Lõgecourt ','44'],
['Paingny','45'],
['Seure','46'],
['Sommier','47'],
['Aſſy','48'],
['Sainct Mareau','49'],
['Challons ſur la Sone','50'],
['Maſcon','50b'],
['pont de Velle','51'],
['Maſcon','52'],
['Iſle','53'],
['Lyon','54'],
['Beauregart','54b'],
['Lyon','55'],
['Mirebel','55b'],
['Lyon','56'],
['Peron','56b'],
['Lyon','57'],
['pont de Cherry','58'],
['Cremieux','59'],
['Erieux','60'],
['Septome','61'],
['Coſte Daray','62'],
['Roſſillon','63'],
['Anlou','64'],
['Iarſieux','65'],
['Chaſteau neuf','66'],
['Romans','67'],
['Valence','68'],
['l’Eſtoille','69'],
['Loriou','70'],
['derbieres','71'],
['Mõtlimar','72'],
['Douſelle','73'],
['la Garde','74'],
['ſainct Paul','75'],
['Seuſe','76'],
['Bollaines','77'],
['Montdragon','77b'],
['Mornas','78'],
['Quaderouſſe','79'],
['põt deſorgnes','80'],
['Auignon','81'],
['Chaſteau regnard','82'],
['ſainct Remy','83'],
['Touret','84'],
['Salon de Craux en Prouence','85'],
['Laubés','86'],
['ſainct Iehan de la ſalle','86b'],
['Aix en Prouence','87'],
['Pourieres','88'],
['ſainct Maximy','89'],
['ſaincte Baulme','90'],
['Bringnolles','91'],
['Gareau','92'],
['Cueurs','93'],
['ſouliers','94'],
['Yerres','95'],
['Briganſon','95b'],
['Yerres','95c'],
['Toullon','96'],
['Riolle','97'],
['la Cadiere','98'],
['Aubenes','99'],
['Gauſet','99b'],
['Marſeille','100'],
['Baſtille de la Bedoulle','100b'],
['Marignan','101'],
['Martegues','102'],
['ſainct Chamant','103'],
['ſainct Martin','104'],
['Arles','105'],
['Tarraſcon','106'],
['Beauquaire','107'],
['Sarignac','108'],
['Pont du Gap','108b'],
['ſainct Priuat','109'],
['Nymes','110'],
['Vauvert','111'],
['Aigueſmortes','112'],
['Marſeillagues','113'],
['ſainct Brez ','114'],
['Montpellier','115'],
['villeneufue','115b'],
['Montpellier','116'],
['Fabriques','117'],
['Pouſent','118'],
['Florenſac','119'],
['Agde','120'],
['Villeneufue','121'],
['Beziers','122'],
['Nyſens','123'],
['Narbonne','124'],
['Sylan','125'],
['Locquatre','125b'],
['Sylan','126'],
['Narbonne','127'],
['Canet','128'],
['Mont','129'],
['Barbairen','130'],
['Carcaſſonne','131'],
['Arzãt','132'],
['Mõtreal','133'],
['Proille','134'],
['Villaſpic','135'],
['Ferratz','136'],
['Caſtelnauderry','137'],
['Vingnonet','138'],
['Ville franche','139'],
['Ville-nouuelle','140'],
['Bazieges','141'],
['Mongiſcart','142'],
['Thoulouſe','143'],
['ſainct Michel','143b'],
['Toulouſe','144'],
['ſainct Iorry','145'],
['Fronton','146'],
['Clau','147'],
['Montauban','148'],
['Baſtide del Tempe','148b'],
['Moiſac','149'],
['Pontuy','150'],
['Ballence','151'],
['Mageſterre','152'],
['la Foſſe','152b'],
['Agen','501'],
['port ſaincte Marie','502'],
['Eguillon','503'],
['Marmande','504'],
['la Reolle','505'],
['Quadillac','506'],
['Bordeaux','507'],
['Toars','508'],
['à l’Eueſché','509'],
['Caſtres','510'],
['Lengon','511'],
['Bazas','512'],
['Captieux','513'],
['Roquehort','514'],
['Mont de Marſen','515'],
['Millac','516'],
['Tartas','517'],
['Pouton','518'],
['Dax','519'],
['Saubuſe','520'],
['Bayonne','521'],
['ſainct Iean de Luz','522'],
['Endaye','523'],
['ſainct Iean de Luz','524'],
['Bayonne','525'],
['ſainct Bernard','525b'],
['Bayõne','525c'],
['Iſle Daiſguemeau','525d'],
['Bayonne','525e'],
['Sainct Iehan de Luz','526'],
['Bierry','526b'],
['Bayonne','527'],
['Hurt','527b'],
['Bidach','528'],
['Perrehorrade','529'],
['Dax','530'],
['Tartas','531'],
['mont de Marſan','532'],
['Cazaire','533'],
['Noguero','534'],
['Yauze','535'],
['Mõt Real','536'],
['Condon','537'],
['Nerac','538'],
['Buſet','539'],
['Thonintz','540'],
['Verteuil','541'],
['Loſun','542'],
['Bergerac','543'],
['Laugat','544'],
['Menſiden','544b'],
['Ribera','545'],
['Rochebeaucourt','546'],
['la Tour Garnier','546b'],
['Angouleſme','547'],
['la Thouure','547b'],
['Angouleſme','547c'],
['Chaſteauneuf','547d'],
['Iarnac','548'],
['Coignac','549'],
['Lonza','549b'],
['Coignac','549'],
['Port Chauueau','549d'],
['Xainctes','550'],
['Cormoreau','550b'],
['le Meſnil','550c'],
['ſainct Iuſt','550d'],
['Marennes','551'],
['le Broage','552'],
['Marennes','551'],
['Cormoran','552b'],
['Xainctes','553'],
['Briſembourg','553b'],
['ſainct Iehan D’angely','554'],
['Parenſes','554b'],
['Surgeres','555'],
['la Iarrie','555b'],
['la Rochelle','556'],
['Benon','556a'],
['Mozé','557'],
['Fontenay le Battu','557a'],
['Nyort','558'],
['Echeroé','558a'],
['Chantdenier','559'],
['Baubare','559a'],
['la Rochefaton','560'],
['Heruaut','560a'],
['Oueron','561'],
['Touarts','561a'],
['Ouerõ','561b'],
['Loudun','562'],
['Seaulx','562a'],
['Champigny','563'],
['Marſé','563a'],
['Chauigny','564'],
['Fronteuaux','565'],
['Brezé','566'],
['Doué','566a'],
['Martigny Bryant','567'],
['Alẽſon','567b'],
['Briſſac','568'],
['Gonnor','569'],
['Chemilly','569b'],
['Iallays','570'],
['Beaupreau','570b'],
['Regrepiere','571'],
['Loron Bottreau','572'],
['Chebiette','572b'],
['Thoret','572c'],
['Nantes','573'],
['la Gallochette','573a'],
['Ioué','574'],
['Maidon','574a'],
['Chaſteaubriand','575'],
['Bourg delbret','575a'],
['la Motte','576'],
['Candé','576b'],
['Lorou','577'],
['la Touche aux Aſnes','577b'],
['Angers','578'],
['au Verger','579'],
['Lezigny','579b'],
['Durtal','580'],
['Gerzé','580b'],
['Baugé','581'],
['Mõtliherné','581b'],
['Fouriers','582'],
['Bourgueil','583'],
['Ingrande','583a'],
['Lẽgés','584'],
['Mailly','584b'],
['Pleſſis léz Tours','584c'],
['Tours','585'],
['Pleſſis','585b'],
['la Bourdoiziere','585c'],
['Chenonçeau','586'],
['Amboiſe','587'],
['Ecures','587a'],
['Bloys','588'],
['Cheuerny','589'],

['Remorentin','590'],
['Menetou','590'],
['Viarrõ','591'],
['Meun ſur Yeure','592'],
['Bourges','593'],
['ſainct Ieu','593b'],
['Dun le Roy','594'],
['pont de Chargé','594b'],
['Couleuures','595'],
['la Franchiſe','595b'],
['ſainct Menou','596'],
['Sauigny','596b'],
['Moulins','597'],
['Beſſé','598'],
['Varennes','599'],
['Sainct Germain de la Foſſe','599b'],
['Vichy','600'],
['Maringues','601'],
['Duſſet','602'],
['Villeconte','603'],
['ſainct Saturnin','604'],
['Clermont en Auuergne','605'],
['Mõtferrand','605b'],
['Clermont','605c'],
['Rion','605d'],
['ſainct Bonnet','605e'],
['Aigueperſe','606'],
['Ebruſle','606b'],
['Chantelle','607'],
['la Coue','607b'],
['Montmarault','608'],
['Brés','608b'],
['Coſne en Bourbonnois','609'],
['Tenoille','609b'],
['Torſy','610'],
['Guyarche','611'],
['Aubigny','611a'],
['la Charité','612'],
['Nerſy','612a'],
['Douzy le pré','613'],
['Entrain','613a'],
['la Peſſeliere','614'],
['Auoynes','614a'],
['Auxerre','615'],
['Regẽt','615a'],
['Iuigny','616'],
['Remeau','616a'],
['Ville-neufue','617'],
['Sens','618'],
['Sergines','618a'],
['Brais','619'],
['Mont-montoys','619a'],
['Nangy','620'],
['Toquin','620a'],
['Monceaux','621'],
['Sainct Mor des foſſez','622'],
['Paris','623'],

]



"""
locations = [
['chez nous','1'],
['envoya quérir','2'],
['abbaye de Jarsy','3'],
['petit Bourbon','4'],
['logis de <abbr class="abbr" title="Monsieur">M.</abbr>&#160;Guiot','5'],
['chez elles','6'],
['à table','7'],
['chez moi à la campagne','8'],
['Gros-Bois','9'],
['en nos maisons','10'],
['Gros-Bois','11'],
['Sussy','12'],
['Gros-Bois','13'],
['Sussy','14'],
['à Paris','15'],
['Val-de-Grâce','16'],
['chez moi','17'],
['Orléans','18'],
['Poitiers','19'],
['Angoulême','20'],
['petite ville','21'],
['la Tour Blanche','22'],
['Bourdeille','23'],
['Périgueux','24'],
['Bergerac','25'],
['Libourne','26'],
['la Bastide','27'],
['Garonne','28'],
['porte du Chapeau-Rouge','29'],
['à l’archevêché','30'],
['Bacalan','31'],
['la Bastide','32'],
['Lamone','33'],
['Libourne','34'],
['Mucidan','35'],
['Riberac','36'],
['Angoulême','37'],
['Paris','38'],
['chez la reine','39'],
['chez nous','40'],
['chez <abbr class="abbr" title="Monsieur">M.</abbr>&#160;le Cardinal','41'],
['Montereau-Faut-Yonne','42'],
['du couvent','43'],
['Montereau','44'],
['au milieu de la rivière de Seine','45'],
['Melun','46'],
['Paris','47'],
['chez moi','48'],
]
"""

inputText = open("tourdefrance-old.html", "r", encoding="utf-8")
outputText = open("tourdefrance.html", "w", encoding="utf-8")

"""
inputText = open("memoires-guette-old.html", "r", encoding="utf-8")
outputText = open("memoires-guette.html", "w", encoding="utf-8")
"""

allText = ""
for line in inputText:
   allText += line

treatedText = ""
remainingText = allText
l = 0
while l < len(locations):
   location = locations[l][0]
   id = locations[l][1]
   print("Looking for location #" + str(l) + ": " + location)
   position = remainingText.find(location)
   if position > 0:
      treatedText += remainingText[0:position] + '<span class="etape-texte" id="s' + id + '" onclick="(document.querySelector(\'#mark' + id + '\')).click()">' + location + '</span>'
      remainingText = remainingText[position+len(location):len(remainingText)]
   else:
      l = len(locations)
   l = l+1
inputText.close()
outputText.writelines(treatedText)
outputText.close()